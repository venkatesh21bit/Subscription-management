PHASE 1 ‚Äî Foundation & Safety (DO THIS FIRST)
1Ô∏è‚É£ Database & model hardening

Goal: prevent data corruption forever.

 Add DB constraints

One current financial year per company

Unique voucher numbers per (company, voucher_type, FY)

Unique account codes per company

 Add CHECK constraints

DR/CR only

Quantity > 0

 Replace risky CASCADE deletes with PROTECT on:

Ledger

Voucher

Invoice

FinancialYear

 Add indexes

(company, created_at)

(company, status)

(company, code)

üëâ Output: schema that auditors won‚Äôt break

PHASE 2 ‚Äî Core Accounting Engine (HEART OF ERP)
2Ô∏è‚É£ Voucher posting service (atomic)

Goal: single source of truth for accounting.

Create a posting service, not logic in views.

 Voucher validation

‚â• 2 lines

Œ£DR = Œ£CR

Ledger.company == Voucher.company

FY not closed

 Atomic transaction

 Auto-sequence generation

 Posting timestamp

 Status transition: DRAFT ‚Üí POSTED

üìå Never update balances anywhere.

3Ô∏è‚É£ Voucher reversal & cancellation

Goal: audit-safe corrections.

 Reverse voucher generator

New voucher with inverted DR/CR

Link via reversed_voucher

 Disallow delete after posting

 Enforce policy via VoucherType flags

PHASE 3 ‚Äî Inventory Engine (NON-NEGOTIABLE)
4Ô∏è‚É£ Stock movement service

Goal: correct stock on hand always.

 StockMovement creation tied to voucher

 Support:

IN (purchase, production)

OUT (sale, consumption)

Transfer (from ‚Üí to godown)

 Batch enforcement if enabled

 Unit of Measure conversion

Rule

Stock on Hand = Œ£(IN) ‚àí Œ£(OUT)

5Ô∏è‚É£ Stock valuation engine (FIFO / AVG)

Goal: financial correctness.

 FIFO buckets per item

 AVG calculation per movement

 Inventory value report

 Stock ‚Üî GL valuation posting

üìå No shortcuts here. This is where ERPs fail.

PHASE 4 ‚Äî Sales, Purchase & Invoicing
6Ô∏è‚É£ Order ‚Üí Invoice ‚Üí Voucher pipeline

Goal: operational flow.

 SalesOrder lifecycle

Draft ‚Üí Confirmed ‚Üí Invoiced ‚Üí Closed

 PurchaseOrder lifecycle

 Invoice creation

 Auto-create Voucher from Invoice

 Link Invoice ‚Üî Voucher

7Ô∏è‚É£ Credit control & aging

Goal: prevent bad debt.

 Outstanding calculation

 Credit limit enforcement

 Aging buckets (0‚Äì30 / 31‚Äì60 / 60+)

PHASE 5 ‚Äî GST & Statutory (INDIA-CRITICAL)
8Ô∏è‚É£ GST computation engine

Goal: returns without Excel hell.

 GST breakup per invoice line

 Input vs Output tax ledger posting

 Multi-GSTIN handling

 Place of supply logic

9Ô∏è‚É£ GST returns

 GSTR-1 (sales)

 GSTR-3B (summary)

 JSON generation for portal

 Lock vouchers after filing

PHASE 6 ‚Äî Payroll Engine
üîü Payroll run system

Goal: repeatable salary processing.

 PayrollRun (monthly)

 Pull EmployeePayStructure

 Compute:

Gross

PF

ESI

TDS

Net pay

 Create Payroll Voucher

 Lock payroll month

PHASE 7 ‚Äî Permissions & Security
1Ô∏è‚É£1Ô∏è‚É£ Role-based access control

Goal: zero data leaks.

 Company context middleware

 Role ‚Üí permission matrix

 Enforce company scoping at query level

 Block cross-company access

1Ô∏è‚É£2Ô∏è‚É£ Approval workflows (maker‚Äìchecker)

Goal: enterprise readiness.

 Voucher approval flow

 Amount-based thresholds

 Approval audit trail

PHASE 8 ‚Äî Reporting & Performance
1Ô∏è‚É£3Ô∏è‚É£ Core financial reports

Must-have

 Trial Balance

 Balance Sheet

 Profit & Loss

 Ledger statements

 Stock summary

üìå Reports must be derived, never stored.

1Ô∏è‚É£4Ô∏è‚É£ Performance optimization

 Prefetch & select_related tuning

 Materialized views (optional)

 Background jobs for heavy reports

PHASE 9 ‚Äî System Integrity
1Ô∏è‚É£5Ô∏è‚É£ Audit & compliance

 Auto AuditLog hooks

 Before/after snapshots

 Immutable accounting data

1Ô∏è‚É£6Ô∏è‚É£ Backup & recovery

 Daily DB backups

 FY-wise restore testing

 Migration rollback strategy

PHASE 10 ‚Äî API & Integration
1Ô∏è‚É£7Ô∏è‚É£ External interfaces

 REST APIs for:

Orders

Invoices

Payments

 Webhooks

 IntegrationEvent retry worker